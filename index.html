
<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta name="theme-color" content="#0b5fff" />
  <link rel="manifest" href="manifest.webmanifest" />
  <title>Calcolo Prezzi</title>
  <style>
    body { font-family: system-ui, -apple-system; margin:0; background:#f5f5f5; }
    header { background:white; padding:16px; border-bottom:1px solid #ddd; }
    main { padding:16px; max-width:700px; margin:auto; }
    .card { background:white; padding:16px; border-radius:12px; margin-bottom:16px; }
    select, input, button { width:100%; padding:12px; font-size:16px; margin-top:8px; }
    button { background:#0b5fff; color:white; border:0; border-radius:10px; }
    ul { list-style:none; padding:0; }
    li { padding:10px 0; border-bottom:1px solid #eee; }
    .total { font-size:20px; font-weight:800; text-align:right; }
  </style>
</head>
<body>

<header>
  <h1>Calcolo Prezzi</h1>
</header>

<main>
  <div class="card">
    <h3>Aggiungi prodotto</h3>
    <select id="product"></select>
    <input type="number" id="qty" value="1" min="1">
    <button onclick="add()">Aggiungi</button>
  </div>

  <div class="card">
    <h3>Carrello</h3>
    <ul id="cart"></ul>
    <div class="total" id="total">€0,00</div>
  </div>
</main>

<script>
/* ====== QUI MODIFICHI I PRODOTTI ====== */
const PRODUCTS = [
 { id: "posa muffola", name: "posa muffola", price: 158.28 },
  { id: "posa pte esterno", name: "posa pte esterno", price: 65.21 },
  { id: "posa pte interno", name: "posa pte interno", price: 80 }
  { id: "giunzione", name: "giunzione", price: 5.61 }
  { id: "attestazione", name: "attestazione", price: 41.6 }
  { id: "terminazione", name: "terminazione", price: 6.96 }
  { id: "posa rfid", name: "posa rfid", price: 1.55 }
  { id: "maggiorazione pte spillato", name: "maggiorazione pte spillato", price: 46.25 }
];
/* ==================================== */

const sel = document.getElementById("product");
const cartEl = document.getElementById("cart");
const totalEl = document.getElementById("total");
let cart = [];

PRODUCTS.forEach(p => {
  const o = document.createElement("option");
  o.value = p.id;
  o.textContent = `${p.name} (€${p.price.toFixed(2)})`;
  sel.appendChild(o);
});

function add() {
  const id = sel.value;
  const qty = parseInt(document.getElementById("qty").value || 1);
  const p = PRODUCTS.find(x => x.id === id);
  const existing = cart.find(x => x.id === id);
  if (existing) existing.qty += qty;
  else cart.push({ id, name: p.name, price: p.price, qty });
  render();
}

function render() {
  cartEl.innerHTML = "";
  let tot = 0;
  cart.forEach(i => {
    tot += i.price * i.qty;
    const li = document.createElement("li");
    li.textContent = `${i.name} x ${i.qty} = €${(i.price*i.qty).toFixed(2)}`;
    cartEl.appendChild(li);
  });
  totalEl.textContent = `€${tot.toFixed(2)}`;
}

if ("serviceWorker" in navigator) {
  navigator.serviceWorker.register("sw.js");
}
</script>
</body>
</html>
